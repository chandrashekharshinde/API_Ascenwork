
Create PROCEDURE [dbo].[SSP_CustomerApp_GetAllOutletType] --'<Json><ServicesAction>GetOutletList</ServicesAction><pageIndex>0</pageIndex><pageSize>15</pageSize><customerId>536</customerId><searchValue></searchValue></Json>'@xmlDoc XMLASBEGINdeclare @PageIndex INTdeclare @PageSize INTdeclare @searchValue nvarchar(500)DECLARE @OutletCount int;DECLARE @intPointer INT;-- ISSUE QUERYDECLARE @sql nvarchar(max)Declare @username nvarchar(max)EXEC sp_xml_preparedocument @intpointer OUTPUT,@xmlDoc;WITH XMLNAMESPACES('http://james.newtonking.com/projects/json' AS json)  select cast ((SELECT distinct 'true' AS [@json:Array], c.Field5 as Id,c.Field5 as OutletType  from Company c where c.IsActive=1 and CompanyType=24 and isnull(c.Field5,'0')!='0'FOR XML PATH('OutletTypeList'),ELEMENTS,ROOT('Json')) AS XML)END